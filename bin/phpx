#!/usr/bin/env php
<?php

// This is the entry point for the PHP-X runtime environment.
// It sets up the necessary components and executes the provided .xphp script.
require_once __DIR__ . '/../src/Config.php';
// Load Logger module for logging
require_once __DIR__ . '/../src/Logger.php';
// this file is create a event loop and execute the provided .xphp script.
require_once __DIR__ . '/../src/Core.php';
// Load DOM module for HTML manipulation
require_once __DIR__ . '/../src/DOM.php';
// Load Request and Response modules for HTTP request/response handling
require_once __DIR__ . '/../src/Request.php';
// Load Response module for HTTP response handling
require_once __DIR__ . '/../src/Response.php';
// Load ErrorHandler module for handling errors and exceptions
require_once __DIR__ . '/../src/ErrorHandler.php';
// Load Middleware module for handling middleware stack
require_once __DIR__ . '/../src/Middleware.php';
// Load Router module for routing HTTP requests
require_once __DIR__ . '/../src/Router.php';
// Load View module for rendering views
require_once __DIR__ . '/../src/View.php';
// Load Native bridge (FFI wrapper)
require_once __DIR__ . '/../src/Native.php';
// Load Server module for HTTP server functionality
require_once __DIR__ . '/../src/Server.php';


Logger::init(Config::get('log.file'));






if ($argc < 2) {
    echo "Usage: phpx <file.xphp>\n";
    exit(1);
}

$file = $argv[1];

if (!file_exists($file)) {
    echo "File not found: $file\n";
    exit(1);
}

require $file;

// runtime start
Core::run();
